
    {% extends './base.html' %}
    {% load staticfiles %}
    {% load i18n %}
    
    {% block content %}   
  <h1>{% trans 'Online geographic information system for calculating internal wave parameters' %}</h1>
  <div id="container">
    <div id="form">
      <h3>{% trans 'Selected point' %}:</h3>
      <div id="lat">Latitude: </div>
      <div id="lon">Longitude: </div>
      <div id="alpha">Alpha: </div>
      <div id="alpha1">Alpha1: </div>
      <div id="beta">Beta: </div>
      <div id="c">C: </div>
      <div id="depth">Depth: </div>
    </div>
    <div id='map'></div>
  </div>
   <script>
    const datas = JSON.parse('{{datas|escapejs}}').data
    const depths = '0	5	10	15	20	25	30	35	40	45	50	55	60	65	70	75	80	85	90	95	100	125	150	175	200	225	250	275	300	325	350	375	400	425	450	475	500	550	600	650	700	750	800	850	900	950	1000	1050	1100	1150	1200	1250	1300	1350	1400	1450	1500	1550	1600	1650	1700	1750	1800	1850	1900	1950	2000	2100	2200	2300	2400	2500	2600	2700	2800	2900	3000	3100	3200	3300	3400	3500	3600	3700	3800	3900	4000	4100	4200	4300	4400	4500	4600	4700	4800	4900	5000	5100	5200	5300	5400	5500'.split('	')
    console.log(depths)
    datas.shift()
    console.log(datas)
    var data = [{
      type:'scattermapbox',
      mode: 'markers',
        lon: datas.map((row)=>Number(row[0])),
        lat: datas.map((row)=>Number(row[1])),
        customdata: datas.map((row)=>{
          return {alpha: row[2], alpha1: row[3], beta: row[4], c: row[5], depth: row[6]}
          }),
        marker: {
          color: 'rgb(255, 165, 0)',
          size: 5
        },
      }]

    var layout = {
    autosize: true,
    hovermode:'closest',
    width: 1000,
    height: 800,
    mapbox: {
      style: "mapbox://styles/tcartamarine/ciq2pv52p000g7mnnwlar0qao",
        bearing:0,
        center: {
        lat:54,
        lon:148,
        },
        pitch:0,
        zoom:3
    },
    }

    Plotly.setPlotConfig({
    mapboxAccessToken: "pk.eyJ1IjoidGNhcnRhbWFyaW5lIiwiYSI6IjdkMThjZTU4YzdiMDkwMjM0YzlhMDhkNDcyYjMwNjIwIn0.tiKHKvthUQM11YlFXJjPwg"
    })

    Plotly.newPlot('map', data, layout)
    var myPlot = document.getElementById('map')
    myPlot.on('plotly_click', function(data){
      console.log(data)
      let lat = document.getElementById("lat")
      lat.innerHTML = "Latitude: " + data.points[0].lat;
      let lon = document.getElementById("lon")
      lon.innerHTML = "Longitude: " + data.points[0].lon;
      let alpha = document.getElementById("alpha")
      alpha.innerHTML = "Alpha: " + data.points[0].customdata.alpha;
      let alpha1 = document.getElementById("alpha1")
      alpha1.innerHTML = "Alpha1: " + data.points[0].customdata.alpha1;
      let beta = document.getElementById("beta")
      beta.innerHTML = "Beta: " + data.points[0].customdata.beta;
      let c = document.getElementById("c")
      c.innerHTML = "C: " + data.points[0].customdata.c;
      let depth = document.getElementById("depth")
      depth.innerHTML = "Depth: " + data.points[0].customdata.depth;
      });
   </script>
{% endblock %}